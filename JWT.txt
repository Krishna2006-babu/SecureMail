ğŸ” JWT (JSON Web Token) â€” Complete Notes
ğŸ“Œ What is JWT?

JWT (JSON Web Token) is a stateless authentication mechanism used to securely transmit information between a client and a server.

In simple words:

JWT is a digital token that proves a user is logged in.

ğŸ¯ Why JWT is Needed

Without JWT:

User must login again and again

Server must store sessions (heavy & slow)

With JWT:

Login once

Token is used for every request

Server remains stateless

ğŸ§  Real-Life Analogy

JWT is like a wristband at an event ğŸŸï¸:

Ticket check = Login

Wristband = JWT

Show wristband â†’ Enter anywhere

No wristband â†’ Entry denied

ğŸ§© JWT Flow (Step-by-Step)
1ï¸âƒ£ User Logs In
Client â†’ Email + Password â†’ Server

2ï¸âƒ£ Server Verifies Credentials

Checks email in database

Compares hashed password

If valid â†’ continue
If invalid â†’ 401 Unauthorized

3ï¸âƒ£ Server Generates JWT
jwt.sign(
  { id: user._id },
  JWT_SECRET,
  { expiresIn: "1h" }
);


JWT contains:

User identity (payload)

Signature (security)

Expiry time

4ï¸âƒ£ Server Sends JWT to Client
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}

5ï¸âƒ£ Client Stores JWT

In memory

Or localStorage

Or cookies (production)

6ï¸âƒ£ Client Sends JWT with Requests
Authorization: Bearer <JWT_TOKEN>

7ï¸âƒ£ Server Verifies JWT

Checks signature

Checks expiry

Decodes payload

âœ” Valid â†’ allow request
âŒ Invalid â†’ 403 Forbidden

ğŸ§± Structure of a JWT (VERY IMPORTANT)

A JWT has 3 parts, separated by dots:

HEADER.PAYLOAD.SIGNATURE


Example:

xxxxx.yyyyy.zzzzz

ğŸ”¹ 1. Header
{
  "alg": "HS256",
  "typ": "JWT"
}


Defines:

Algorithm used

Token type

ğŸ”¹ 2. Payload
{
  "id": "64ab123...",
  "iat": 1710000000,
  "exp": 1710003600
}


Contains:

User data

Issued time

Expiry time

âš ï¸ Payload is Base64 encoded, not encrypted.

ğŸ”¹ 3. Signature
HMACSHA256(base64(header + payload), secret)


Purpose:

Prevent token tampering

Ensures token integrity

ğŸ” What is JWT Secret?

A private key known only to the server

Used to sign and verify JWT

Stored in .env

JWT_SECRET=supersecretkey


âš ï¸ Never expose this publicly.

ğŸ”’ JWT Middleware (Protection Logic)

Middleware checks:

Is token present?

Is token valid?

Is token expired?

jwt.verify(token, JWT_SECRET, (err, user) => {
  if (err) return res.status(403);
  req.user = user;
  next();
});

ğŸš« Common JWT Errors (You Faced These)
âŒ 401 Unauthorized

Meaning:

User not authenticated

Causes:

Wrong email/password

Token not generated

âŒ 403 Forbidden

Meaning:

Authentication failed

Causes:

Token missing

Token expired

Token invalid

ğŸ§  JWT is Stateless (KEY CONCEPT)

Server does not store sessions

Every request carries its own authentication data

Scales very well

âš–ï¸ JWT vs Session Authentication
Feature	Session	JWT
Server storage	Required	Not required
Scalability	Low	High
Mobile friendly	âŒ	âœ”
Stateless	âŒ	âœ”
ğŸ” Security Best Practices

âœ” Always hash passwords
âœ” Use strong JWT secret
âœ” Set token expiry
âœ” Use HTTPS in production
âœ” Do not store sensitive data in payload

ğŸ§  JWT in SecureMail (Your Project)

JWT generated on login

Stored on frontend

Sent in Authorization header

Verified by middleware

Used to protect /api/profile

ğŸ§  One-Line Interview Answer

JWT is a stateless authentication mechanism where the server issues a signed token after login, and the client sends that token with each request to prove its identity.

âœ… Summary

JWT = Proof of authentication

Stateless & scalable

Uses signature for security

Widely used in modern backends

If you want next:
